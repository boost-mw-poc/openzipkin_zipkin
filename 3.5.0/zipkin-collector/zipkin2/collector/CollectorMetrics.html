<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) on Sun Feb 16 17:50:24 UTC 2025 -->
<title>CollectorMetrics (Collector: Core Library 3.5.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-02-16">
<meta name="description" content="declaration: package: zipkin2.collector, interface: CollectorMetrics">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/CollectorMetrics.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">zipkin2.collector</a></div>
<h1 title="Interface CollectorMetrics" class="title">Interface CollectorMetrics</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="InMemoryCollectorMetrics.html" title="class in zipkin2.collector">InMemoryCollectorMetrics</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">CollectorMetrics</span></div>
<div class="block">Instrumented applications report spans over a transport such as Kafka. Zipkin collectors receive
 these messages, <a href="https://github.com/openzipkin/zipkin/zipkin/apidocs/zipkin2/codec/BytesDecoder.html#decode(byte%5B%5D,java.util.Collection)" title="class or interface in zipkin2.codec" class="external-link"><code>decoding them into spans</code></a>,
 <a href="CollectorSampler.html#isSampled(java.lang.String,boolean)"><code>apply sampling</code></a>, and <a href="https://github.com/openzipkin/zipkin/zipkin/apidocs/zipkin2/storage/SpanConsumer.html#accept(java.util.List)" title="class or interface in zipkin2.storage" class="external-link"><code>queues them for storage</code></a>.

 <p>Callbacks on this type are invoked by zipkin collectors to improve the visibility of the
 system. A typical implementation will report metrics to a telemetry system for analysis and
 reporting.

 <h3>Spans Collected vs Queryable Spans</h3>

 <p>A span queried may be comprised of multiple spans collected. While instrumentation should
 report complete spans, Instrumentation often patch the same span twice, ex adding annotations.
 Also, RPC spans include at least 2 messages due to the client and the server reporting
 separately. Finally, some storage components merge patches at ingest. For these reasons, you
 should be cautious to alert on queryable spans vs stored spans, unless you control the
 instrumentation in such a way that queryable spans/message is reliable.

 <h3>Key Relationships</h3>

 <p>The following relationships can be used to consider health of the tracing system.

 <pre>
 <ul>
 <li>Successful Messages = <a href="#incrementMessages()"><code>Accepted messages</code></a> -
 <a href="#incrementMessagesDropped()"><code>Dropped messages</code></a>. Alert when this is less than amount of
 messages sent from instrumentation.</li>
 <li>Stored spans &lt;= <a href="#incrementSpans(int)"><code>Accepted spans</code></a> - <a href="#incrementSpansDropped(int)"><code>Dropped spans</code></a>. Alert when this drops below the
 <code>collection-tier sample rate</code>.
 </li>
 </ul>
 </pre></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></code></div>
<div class="col-second even-row-color"><code><a href="#NOOP_METRICS" class="member-name-link">NOOP_METRICS</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#forTransport(java.lang.String)" class="member-name-link">forTransport</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;transportType)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Those who wish to partition metrics by transport can call this method to include the transport
 type in the backend metric key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#incrementBytes(int)" class="member-name-link">incrementBytes</a><wbr>(int&nbsp;quantity)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Increments the number of bytes containing serialized spans in a message.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#incrementMessages()" class="member-name-link">incrementMessages</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Increments count of messages received, which contain 0 or more spans.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#incrementMessagesDropped()" class="member-name-link">incrementMessagesDropped</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Increments count of messages that could not be read.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#incrementSpans(int)" class="member-name-link">incrementSpans</a><wbr>(int&nbsp;quantity)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Increments the count of spans read from a successful message.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#incrementSpansDropped(int)" class="member-name-link">incrementSpansDropped</a><wbr>(int&nbsp;quantity)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Increments the count of spans dropped for any reason.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="NOOP_METRICS">
<h3>NOOP_METRICS</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type"><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></span>&nbsp;<span class="element-name">NOOP_METRICS</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="forTransport(java.lang.String)">
<h3>forTransport</h3>
<div class="member-signature"><span class="return-type"><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></span>&nbsp;<span class="element-name">forTransport</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;transportType)</span></div>
<div class="block">Those who wish to partition metrics by transport can call this method to include the transport
 type in the backend metric key.

 <p>For example, an implementation may by default report <a href="#incrementSpans(int)"><code>incremented
 spans</code></a> to the key "zipkin.collector.span.accepted". When <code>metrics.forTransport("kafka"</code>
 is called, the counter would report to "zipkin.collector.kafka.span.accepted"</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transportType</code> - ex "http", "rabbitmq", "kafka"</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="incrementMessages()">
<h3>incrementMessages</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">incrementMessages</span>()</div>
<div class="block">Increments count of messages received, which contain 0 or more spans. Ex POST requests or Kafka
 messages consumed.</div>
</section>
</li>
<li>
<section class="detail" id="incrementMessagesDropped()">
<h3>incrementMessagesDropped</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">incrementMessagesDropped</span>()</div>
<div class="block">Increments count of messages that could not be read. Ex malformed content, or peer disconnect.</div>
</section>
</li>
<li>
<section class="detail" id="incrementSpans(int)">
<h3>incrementSpans</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">incrementSpans</span><wbr><span class="parameters">(int&nbsp;quantity)</span></div>
<div class="block">Increments the count of spans read from a successful message. When bundling is used, accepted
 spans will be a larger number than successful messages.</div>
</section>
</li>
<li>
<section class="detail" id="incrementBytes(int)">
<h3>incrementBytes</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">incrementBytes</span><wbr><span class="parameters">(int&nbsp;quantity)</span></div>
<div class="block">Increments the number of bytes containing serialized spans in a message.

 <p>Note: this count should relate to the raw data structures, like json or thrift, and discount
 compression, enveloping, etc.</div>
</section>
</li>
<li>
<section class="detail" id="incrementSpansDropped(int)">
<h3>incrementSpansDropped</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">incrementSpansDropped</span><wbr><span class="parameters">(int&nbsp;quantity)</span></div>
<div class="block">Increments the count of spans dropped for any reason. For example, failure queueing to storage
 or sampling decisions.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2025 <a href="https://zipkin.io/">OpenZipkin</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
